import{_ as s,o as n,c as a,Q as t}from"./chunks/framework.7d807baf.js";const h=JSON.parse('{"title":"Error","description":"","frontmatter":{},"headers":[],"relativePath":"guide/functions/error.md","filePath":"guide/functions/error.md","lastUpdated":1699704108000}'),o={name:"guide/functions/error.md"},l=t(`<h1 id="error" tabindex="-1">Error <a class="header-anchor" href="#error" aria-label="Permalink to &quot;Error&quot;">​</a></h1><p>页面错误信息收集,收集以下错误类型：</p><ul><li>资源加载错误,代码异常(error)</li><li>promise 调用链异常(reject)</li><li>console.error 异常</li></ul><p>触发事件时生成的对象</p><table><thead><tr><th>属性名称</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>eventId</td><td>code / HTML 元素上发生异常则为元素名</td><td>事件 ID</td></tr><tr><td>eventType</td><td>error</td><td>事件类型</td></tr><tr><td>triggerPageUrl</td><td></td><td>当前页面 URL</td></tr><tr><td>errMessage</td><td></td><td>错误信息</td></tr><tr><td>errStack</td><td></td><td>完整的错误信息</td></tr><tr><td>line</td><td></td><td>错误信息发生在第几行</td></tr><tr><td>col</td><td></td><td>错误信息发生在第几列</td></tr><tr><td>recordscreen</td><td></td><td>错误录屏数据</td></tr><tr><td>params</td><td></td><td>主动方法触发错误收集可以带参数</td></tr><tr><td>sendTime</td><td></td><td>发送时间</td></tr><tr><td>triggerTime</td><td></td><td>事件发生时间</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 真实场景产生的事件对象</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">eventId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">code</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">eventType</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">errMessage</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a.split is not a function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">line</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">288</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">col</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">9</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">sendTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1689728522923</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">triggerTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1689728522923</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">triggerPageUrl</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:6657/#/err</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">errStack</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TypeError: a.split is not a function</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at VueComponent.codeError (http://localhost:6656/src/views/err/index.vue:288:9)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at invokeWithErrorHandling (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:787:26)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at VueComponent.invoker (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:892:14)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at invokeWithErrorHandling (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:787:26)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at Vue2.$emit (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:2034:9)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at VueComponent.handleClick (http://localhost:6656/node_modules/.vite/deps/element-ui.js?v=534c31e8:27234:20)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at invokeWithErrorHandling (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:787:26)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at HTMLButtonElement.invoker (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:892:14)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at original._wrapper (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:3934:25)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="批量错误采集" tabindex="-1">批量错误采集 <a class="header-anchor" href="#批量错误采集" aria-label="Permalink to &quot;批量错误采集&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>为避免某些场景下重复错误过多而产生重复上报的性能浪费，可采用批量错误采集进行优化，开启后 SDK 内部会收集相同错误信息并在 <code>20s</code> CD 后发送至服务器<br></p><ul><li>单个错误采集会产生 2s 延迟</li><li>批量错误采集会产生 20s 延迟</li><li>事件池满了(50 个)会自动发送</li></ul></div><h3 id="开启方式" tabindex="-1">开启方式 <a class="header-anchor" href="#开启方式" aria-label="Permalink to &quot;开启方式&quot;">​</a></h3><p><code>scopeError = true</code></p><h3 id="批量错误参数" tabindex="-1">批量错误参数 <a class="header-anchor" href="#批量错误参数" aria-label="Permalink to &quot;批量错误参数&quot;">​</a></h3><table><thead><tr><th>属性名称</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>eventId</td><td>code / HTML 元素上发生异常则为元素名</td><td>事件 ID</td></tr><tr><td>eventType</td><td>error</td><td>事件类型</td></tr><tr><td>batchError</td><td></td><td>是否为批量错误</td></tr><tr><td>batchErrorLastHappenTime</td><td></td><td>批量错误中最后一个错误发生时间</td></tr><tr><td>batchErrorLength</td><td></td><td>批量错误的个数</td></tr><tr><td>triggerPageUrl</td><td></td><td>当前页面 URL</td></tr><tr><td>errMessage</td><td></td><td>错误信息</td></tr><tr><td>errStack</td><td></td><td>完整的错误信息</td></tr><tr><td>line</td><td></td><td>错误信息发生在第几行</td></tr><tr><td>col</td><td></td><td>错误信息发生在第几列</td></tr><tr><td>recordscreen</td><td></td><td>错误录屏数据</td></tr><tr><td>params</td><td></td><td>主动方法触发错误收集可以带参数</td></tr><tr><td>sendTime</td><td></td><td>发送时间</td></tr><tr><td>triggerTime</td><td></td><td>事件发生时间</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 真实场景产生的事件对象</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">eventId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">code</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">eventType</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">errMessage</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a.split is not a function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">batchError</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">batchErrorLastHappenTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1689744409113</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">batchErrorLength</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">errStack</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TypeError: a.split is not a function</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at VueComponent.codeError (http://localhost:6656/src/views/err/index.vue?t=1689734427168:288:9)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at invokeWithErrorHandling (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:787:26)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at VueComponent.invoker (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:892:14)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at invokeWithErrorHandling (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:787:26)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at Vue2.$emit (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:2034:9)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at VueComponent.handleClick (http://localhost:6656/node_modules/.vite/deps/element-ui.js?v=534c31e8:27234:20)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at invokeWithErrorHandling (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:787:26)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at HTMLButtonElement.invoker (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:892:14)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at original._wrapper (http://localhost:6656/node_modules/.vite/deps/chunk-A2PO35VE.js?v=534c31e8:3934:25)</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">    at VueComponent.batchErrorA (http://localhost:6656/src/views/err/index.vue?t=1689734427168:325:44)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">triggerPageUrl</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:6656/#/err</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">line</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">288</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">col</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">9</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">sendTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1689744811726</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">triggerTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1689744788264</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">recordscreen</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">H4sIAAAAAAAAA+R9V3vqyNLuD9oXh2C8h0sbm7RA3saYoDuChyQwswATfv2p6iB1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 错误录屏数据</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,13),p=[l];function e(r,c,d,F,y,D){return n(),a("div",null,p)}const E=s(o,[["render",e]]);export{h as __pageData,E as default};
